<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Socket.html">
<link rel="next" href="Tcp.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Console" rel="Chapter" href="Console.html">
<link title="Font" rel="Chapter" href="Font.html">
<link title="Helpers" rel="Chapter" href="Helpers.html">
<link title="Input" rel="Chapter" href="Input.html">
<link title="Input_edit" rel="Chapter" href="Input_edit.html">
<link title="Keys" rel="Chapter" href="Keys.html">
<link title="Log" rel="Chapter" href="Log.html">
<link title="Net" rel="Chapter" href="Net.html">
<link title="Parser" rel="Chapter" href="Parser.html">
<link title="Protocol" rel="Chapter" href="Protocol.html">
<link title="Serialize" rel="Chapter" href="Serialize.html">
<link title="Socket" rel="Chapter" href="Socket.html">
<link title="Sprite" rel="Chapter" href="Sprite.html">
<link title="Tcp" rel="Chapter" href="Tcp.html">
<link title="Udp" rel="Chapter" href="Udp.html">
<link title="Vector" rel="Chapter" href="Vector.html">
<link title="Video" rel="Chapter" href="Video.html"><link title="Sprites" rel="Section" href="#6_Sprites">
<link title="Sprite sets " rel="Section" href="#6_Spritesets">
<link title="Collision " rel="Section" href="#6_Collision">
<link title="World boundary " rel="Section" href="#6_Worldboundary">
<link title="Drawing" rel="Section" href="#6_Drawing">
<title>Sprite</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Socket.html" title="Socket">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Tcp.html" title="Tcp">Next</a>
</div>
<h1>Module <a href="type_Sprite.html">Sprite</a></h1>

<pre><span class="keyword">module</span> Sprite: <code class="code">sig</code> <a href="Sprite.html">..</a> <code class="code">end</code></pre><div class="info module top">
Sprites and collision<br>
</div>
<hr width="100%">

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type">'a</code> t</span> </pre>
<div class="info ">
A sprite.<br>
</div>


<pre><span id="TYPEset"><span class="keyword">type</span> <code class="type">'a</code> set</span> </pre>
<div class="info ">
Type representing a set of sprites that represent the same type of 
   objects in collision and in storing information.<br>
</div>


<pre><span id="TYPEtable"><span class="keyword">type</span> <code class="type">('a, 'b)</code> table</span> </pre>
<div class="info ">
Hashtbl from 'a to 'b sprites<br>
</div>

<br>
<h6 id="6_Sprites">Sprites</h6><br>

<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">?set:'a <a href="Sprite.html#TYPEset">set</a> -> 'a -> <a href="Video.html#TYPEt">Video.t</a> -> ?width:int -> int * int -> 'a <a href="Sprite.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">create ?set data frames ?width position</code> Creates a sprite with frames
   from the given surface.<br>
</div>

<pre><span id="VALmove_to"><span class="keyword">val</span> move_to</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> int * int -> unit</code></pre><div class="info ">
<code class="code">move_to sprite (x, y)</code> Sets the position of <code class="code">sprite</code> to <code class="code">(x, y)</code><br>
</div>

<pre><span id="VALmove"><span class="keyword">val</span> move</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> int * int -> unit</code></pre><div class="info ">
<code class="code">move sprite (dx, dy)</code> moves sprite <code class="code">spr</code> by <code class="code">(dx, dy)</code><br>
</div>

<pre><span id="VALget_pos"><span class="keyword">val</span> get_pos</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> int * int</code></pre><div class="info ">
<code class="code">get_pos sprite</code><br>
<b>Returns</b> the position of <code class="code">sprite</code><br>
</div>

<pre><span id="VALset_data"><span class="keyword">val</span> set_data</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> 'a -> unit</code></pre><div class="info ">
<code class="code">set_data sprite data</code> sets the data of <code class="code">sprite</code> to <code class="code">data</code><br>
</div>

<pre><span id="VALget_data"><span class="keyword">val</span> get_data</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> 'a</code></pre><div class="info ">
<code class="code">get_data sprite</code> returns the data of <code class="code">sprite</code><br>
</div>

<pre><span id="VALget_size"><span class="keyword">val</span> get_size</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> int * int</code></pre><div class="info ">
<code class="code">get_size sprite</code> returns the size of <code class="code">sprite</code><br>
</div>

<pre><span id="VALdelete"><span class="keyword">val</span> delete</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
<code class="code">delete sprite</code> removes <code class="code">sprite</code> from all sets it belong to<br>
</div>
<br>
<h6 id="6_Spritesets">Sprite sets </h6><br>

<pre><span class="keyword">module</span> <a href="Sprite.Set.html">Set</a>: <code class="code">sig</code> <a href="Sprite.Set.html">..</a> <code class="code">end</code></pre><br>
<h6 id="6_Collision">Collision </h6><br>

<pre><span id="VALadd_collision_fun"><span class="keyword">val</span> add_collision_fun</span> : <code class="type">'a <a href="Sprite.html#TYPEset">set</a> -><br>       'b <a href="Sprite.html#TYPEset">set</a> -><br>       ?alpha_bias:int -> bool -> ('a <a href="Sprite.html#TYPEt">t</a> -> 'b <a href="Sprite.html#TYPEt">t</a> -> unit) -> unit</code></pre><div class="info ">
<code class="code">add_collison_fun set1 set2 per_pixel collision_fun</code> 
   adds <code class="code">collision_fun</code> to the list of functions called when a sprite from
   set1 collides with any from set2<br>
<b>Raises</b> <code>Log.fatal</code> when <a href="Sprite.Set.html#VALset_collision"><code class="code">Sprite.Set.set_collision</code></a> was not called for any of
   any of the given sets.<br>
</div>
<div class="param_info"><code class="code">alpha_bias</code> : see <a href="Sprite.html#VALcollides_with"><code class="code">Sprite.collides_with</code></a></div>
<div class="param_info"><code class="code">per_pixel</code> : if set to true per_pixel collision will be checked</div>

<pre><span id="VALcheck_collisions"><span class="keyword">val</span> check_collisions</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
<code class="code">check_collisions sprite</code> finds all objects that <code class="code">sprite</code> collides with
   all sets that were registered for collision with the sets <code class="code">sprite</code> belongs
   to. For every collision it calls the apropriate function registered by
   <a href="Sprite.html#VALadd_collision_fun"><code class="code">Sprite.add_collision_fun</code></a><br>
</div>

<pre><span id="VALcollides_with"><span class="keyword">val</span> collides_with</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> ?alpha_bias:int -> bool -> 'b <a href="Sprite.html#TYPEset">set</a> -> 'b <a href="Sprite.html#TYPEt">t</a> list</code></pre><div class="info ">
<code class="code">collides_with spr per_pixel set</code> returns the list of all sprites from
   <code class="code">set</code> that collide with <code class="code">spr</code><br>
</div>
<div class="param_info"><code class="code">alpha_bias</code> : is an optional parameter, that for surfaces with alpha
   channel means what sum of alpha values hast to be overcomed for collision 
   to be detected. The default is 255 (collision when sum is over 255), 
   while maximum for any surface is 255.
   If <code class="code">per_pixel</code> is <code class="code">true</code> per pixel collision will be checked</div>
<br>
<h6 id="6_Worldboundary">World boundary </h6><br>

<pre><span id="VALin_bounds"><span class="keyword">val</span> in_bounds</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">in_bounds sprite</code> checks if the sprite is ouside of world in any of the
   sets it belongs to<br>
</div>

<pre><span id="VALmove_in_bounds"><span class="keyword">val</span> move_in_bounds</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> ?chk:('a <a href="Sprite.html#TYPEt">t</a> -> bool) -> int * int -> int * int</code></pre><div class="info ">
<code class="code">move_in_bounds sprites (dx, dy)</code> moves sprite as far as possible so that
   it remains in bounds<br>
</div>
<br>
<h6 id="6_Drawing">Drawing</h6><br>

<pre><span id="VALdraw"><span class="keyword">val</span> draw</span> : <code class="type">?on:<a href="Video.html#TYPEt">Video.t</a> -> 'a <a href="Sprite.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
<code class="code">draw cnt sprite</code> draws sprite <code class="code">spr</code> on context <code class="code">cnt</code>. <code class="code">cnt</code> is optional<br>
</div>

<pre><span id="VALset_animation_frame"><span class="keyword">val</span> set_animation_frame</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> int -> unit</code></pre><div class="info ">
<code class="code">set_animation_frame sprite frame_num</code> Sets the frame displayed by <code class="code">sprite</code>
   to <code class="code">frame_num</code> picture on the image. If wrong frame number is specified
   an error message is shown on the console.<br>
</div>

<pre><span id="VALget_animation_frame"><span class="keyword">val</span> get_animation_frame</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> int</code></pre><div class="info ">
<code class="code">get_animation_frame sprite</code><br>
<b>Returns</b> the number of frame currently 
   displayed by <code class="code">sprite</code><br>
</div>

<pre><span id="VALset_frames"><span class="keyword">val</span> set_frames</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> ?width:int -> <a href="Video.html#TYPEt">Video.t</a> -> unit</code></pre>
<pre><span id="VALget_frames"><span class="keyword">val</span> get_frames</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> <a href="Video.html#TYPEt">Video.t</a></code></pre>
<pre><span id="VALmask_cut"><span class="keyword">val</span> mask_cut</span> : <code class="type">'a <a href="Sprite.html#TYPEt">t</a> -> 'b <a href="Sprite.html#TYPEt">t</a> -> int -> unit</code></pre><div class="info ">
<code class="code">mask_cut from_where cut_what alpha_bias</code> cuts all pixel's from 
   <code class="code">from_where</code> where <code class="code">cut_what</code> has alpha bigger than <code class="code">alpha_bias</code><br>
</div>

<pre><span class="keyword">module</span> <a href="Sprite.Table.html">Table</a>: <code class="code">sig</code> <a href="Sprite.Table.html">..</a> <code class="code">end</code></pre></body></html>