<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Log.html">
<link rel="next" href="Parser.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Console" rel="Chapter" href="Console.html">
<link title="Font" rel="Chapter" href="Font.html">
<link title="Helpers" rel="Chapter" href="Helpers.html">
<link title="Input" rel="Chapter" href="Input.html">
<link title="Input_edit" rel="Chapter" href="Input_edit.html">
<link title="Keys" rel="Chapter" href="Keys.html">
<link title="Log" rel="Chapter" href="Log.html">
<link title="Net" rel="Chapter" href="Net.html">
<link title="Parser" rel="Chapter" href="Parser.html">
<link title="Protocol" rel="Chapter" href="Protocol.html">
<link title="Serialize" rel="Chapter" href="Serialize.html">
<link title="Socket" rel="Chapter" href="Socket.html">
<link title="Sprite" rel="Chapter" href="Sprite.html">
<link title="Tcp" rel="Chapter" href="Tcp.html">
<link title="Udp" rel="Chapter" href="Udp.html">
<link title="Vector" rel="Chapter" href="Vector.html">
<link title="Video" rel="Chapter" href="Video.html"><title>Net</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Log.html" title="Log">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Parser.html" title="Parser">Next</a>
</div>
<h1>Module <a href="type_Net.html">Net</a></h1>

<pre><span class="keyword">module</span> Net: <code class="code">sig</code> <a href="Net.html">..</a> <code class="code">end</code></pre><div class="info module top">
High-level networking.
   This module provides a protocol for data exchange and synchronization.<br>
</div>
<hr width="100%">

<pre><span id="VALprocess"><span class="keyword">val</span> process</span> : <code class="type">bool -> bool</code></pre><div class="info ">
<code class="code">process tick_time</code> Do what i mean. should be called every mainloop
   rotation in client and server.<br>
<b>Returns</b> <code class="code">true</code> if a new frame should happen. Whie we are the server or when
   not connected it is equal to <code class="code">tick_time</code> whilst on a client it is <code class="code">true</code>
   only if a new packet with messages has been received. It means that all
   events which happened have been received and processed and it is time for a
   new frame to happen.<br>
</div>
<div class="param_info"><code class="code">tick_time</code> : should be true if it is time for a new frame</div>

<pre><span id="VALinit"><span class="keyword">val</span> init</span> : <code class="type">(int -> bool -> bool -> unit) -> unit</code></pre><div class="info ">
<code class="code">init pl_change_fun</code> adds 'connect' and 'server' to console.<br>
</div>
<div class="param_info"><code class="code">pl_change_fun</code> : is the function called on each instance of the program
   when a new player comes or a player leaves. It informs the game that a
   player has connected or leaved. The game receives the number
   of player, is the player a local one and if the player is a new one.</div>

<pre><span id="VALadd_broadcast"><span class="keyword">val</span> add_broadcast</span> : <code class="type">'a <a href="Serialize.html#TYPEt">Serialize.t</a> -> (int -> 'a -> unit) -> int -> 'a -> unit</code></pre><div class="info ">
<code class="code">add_broadcast serialize client_recv</code> adds an automatically broadcasted
   message.<br>
<b>Returns</b> function used to send such this message. When any of the
   connected instances of the program calls the this function, <code class="code">client_recv</code>
   will be called on all of them, including the one that send it and the
   server.
<p>

   Most game actions should be added with this function 
   Here and in all following functions the int param is the number of the
   player who sent the original message.<br>
</div>

<pre><span id="VALadd_client_to_server"><span class="keyword">val</span> add_client_to_server</span> : <code class="type">'a <a href="Serialize.html#TYPEt">Serialize.t</a> -> (int -> 'a -> unit) -> int -> 'a -> unit</code></pre>
<pre><span id="VALadd_server_to_client"><span class="keyword">val</span> add_server_to_client</span> : <code class="type">'a <a href="Serialize.html#TYPEt">Serialize.t</a> -> ('a -> unit) -> int list -> 'a -> unit</code></pre>
<pre><span id="VALadd_server_broadcast"><span class="keyword">val</span> add_server_broadcast</span> : <code class="type">'a <a href="Serialize.html#TYPEt">Serialize.t</a> -> ('a -> unit) -> 'a -> unit</code></pre>
<pre><span id="VALcheck_privileged"><span class="keyword">val</span> check_privileged</span> : <code class="type">unit -> bool</code></pre><div class="info ">
<code class="code">check_privileged ()</code><br>
<b>Returns</b> <code class="code">true</code> if we are privileged. At the time
   of writing this only the server is privileged.<br>
</div>

<pre><span id="VALadd_var"><span class="keyword">val</span> add_var</span> : <code class="type">string -> 'a <a href="Parser.html#TYPEt">Parser.t</a> -> 'a -> 'a Pervasives.ref * (string -> unit)</code></pre><div class="info ">
<code class="code">add_var name converter</code> is used to add a net changeable variable. This is
   a variable just like added by <a href="Parser.html#VALadd_variable"><code class="code">Parser.add_variable</code></a>, but it can be changed
   via console only on privileged clients. Every console change to such a
   variable is broadcasted to all other clients and to the server.<br>
</div>

<pre><span id="VALget_local_players"><span class="keyword">val</span> get_local_players</span> : <code class="type">unit -> int list</code></pre><div class="info ">
<code class="code">get_local_players ()</code><br>
<b>Returns</b> the list of local player numbers<br>
</div>

<pre><span id="VALadd_synchronizer"><span class="keyword">val</span> add_synchronizer</span> : <code class="type">(int -> unit) -> unit</code></pre><div class="info ">
<code class="code">add_synchronizer fnctn</code> adds a function called on the server whenever
   a new player connects. It is used to synchronize the new player with the
   current world state<br>
</div>
</body></html>